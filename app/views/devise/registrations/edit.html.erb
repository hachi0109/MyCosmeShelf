<div class="container">
  <header class="page-header">
    <%= link_to "≪ マイページ", user_root_path, class: "back-link" %>
    <h1 class="page-title">アカウント編集</h1>
    <div style="width: 40px;"></div>
  </header>

  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "cosme-form" }) do |f| %>
    <%= render "devise/shared/error_messages", resource: resource %>

    <div class="field">
      <%= f.label :name, "ニックネーム" %>
      <%= f.text_field :name, autofocus: true %>
    </div>

    <div class="field">
      <%= f.label :email, "メールアドレス" %>
      <%= f.email_field :email, autocomplete: "email" %>
    </div>

    <div class="field">
      <%= f.label :theme_color_id, "テーマカラー" %>
      <%= f.collection_select :theme_color_id, ThemeColor.all, :id, :name, { prompt: "選択してください" } %>
    </div>

    <div class="field">
      <%= f.label :password, "新しいパスワード（変更しない場合は空欄）" %>
      <%= f.password_field :password, autocomplete: "new-password", placeholder: "6文字以上" %>
    </div>

    <div class="field">
      <%= f.label :password_confirmation, "新しいパスワード（確認）" %>
      <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
    </div>

    <div class="field">
      <%= f.label :current_password, "現在のパスワード（変更には必須）" %>
      <%= f.password_field :current_password, autocomplete: "current-password" %>
      <p style="font-size: 12px; color: #888; margin-top: 5px;">※セキュリティのため、変更を保存するには現在のパスワードが必要です。</p>
    </div>

    <div class="actions">
      <%= f.submit "更新する", class: "submit-btn" %>
    </div>
  <% end %>
  
  <div style="margin-top: 30px; text-align: center;">
    <%= button_to "アカウント削除", registration_path(resource_name), data: { confirm: "本当に削除しますか？", turbo_confirm: "本当に削除しますか？" }, method: :delete, class: "btn btn-danger", style: "width: 100%; max-width: 200px;" %>
  </div>
</div>

<style>
  :root {
    --main-color: <%= current_user.theme_color.name == 'グリーン' ? '#78978b' : 
                      current_user.theme_color.name == 'ピンク' ? '#d8a3a3' : 
                      current_user.theme_color.name == 'ブルー' ? '#8ba2ad' : 
                      current_user.theme_color.name == 'ミルクティー' ? '#bcaaa4' : '#d8a3a3' %>;
    --main-bg: <%= current_user.theme_color.name == 'グリーン' ? '#f4f7f6' : 
                   current_user.theme_color.name == 'ピンク' ? '#fdf8f8' : 
                   current_user.theme_color.name == 'ブルー' ? '#f4f6f7' : 
                   current_user.theme_color.name == 'ミルクティー' ? '#f7f5f4' : '#fdf8f8' %>;
    --text-color: #5a5a5a;
  }
</style>
